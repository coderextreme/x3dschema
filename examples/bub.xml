<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 4.0//EN" "http://www.web3d.org/specifications/x3d-4.0.dtd">
<X3D profile="Immersive" version="4.0"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance" xsd:noNamespaceSchemaLocation="http://www.web3d.org/specifications/x3d-4.0.xsd">
    <head>
        <meta content="bub.x3d" name="title"/>
        <meta content="John Carlson" name="creator"/>
        <meta content="3 prismatic spheres" name="description"/>
        <meta content="X3D-Edit, https://savage.nps.edu/X3D-Edit" name="generator"/>
        <component level="1" name="Scripting"/>
        <component level="3" name="EnvironmentalEffects"/>
        <component level="1" name="Shaders"/>
        <component level="1" name="CubeMapTexturing"/>
        <component level="1" name="Texturing"/>
        <component level="1" name="Rendering"/>
        <component level="4" name="Shape"/>
        <component level="3" name="Grouping"/>
        <component level="1" name="Core"/>
    </head>
    <Scene>
        <ProtoDeclare name="Bubble">
            <ProtoInterface/>
            <ProtoBody>
                <Transform DEF="transform">
                    <Shape DEF="myShape">
                        <Appearance>
                            <Material diffuseColor="0.7 0.7 0.7" specularColor="0.5 0.5 0.5"/>
                            <ComposedCubeMapTexture DEF="texture"/>
                            <ComposedShader DEF="x3dom" language="GLSL">
                                <ShaderPart url="&quot;../shaders/x3dom.vs&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/shaders/x3dom.vs&quot;"/>
                                <ShaderPart type="FRAGMENT" url="&quot;../shaders/pc_bubbles.fs&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/shaders/pc_bubbles.fs&quot;"/>
                                <field accessType="inputOutput"
                                    name="cube" type="SFInt32"/>
                                <field accessType="inputOutput"
                                    name="chromaticDispertion"
                                    type="SFVec3f" value="0.98 1 1.033"/>
                                <field accessType="inputOutput"
                                    name="bias" type="SFFloat" value="0.5"/>
                                <field accessType="inputOutput"
                                    name="scale" type="SFFloat" value="0.5"/>
                                <field accessType="inputOutput"
                                    name="power" type="SFFloat" value="2"/>
                            </ComposedShader>
                            <ComposedShader DEF="x_ite" language="GLSL">
                                <ShaderPart url="&quot;../shaders/x_ite.vs&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/shaders/x_ite.vs&quot;"/>
                                <ShaderPart type="FRAGMENT" url="&quot;../shaders/x_itebubbles.fs&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/shaders/x_itebubbles.fs&quot;"/>
                                <field accessType="inputOutput"
                                    name="cube" type="SFNode">
                                    <ComposedCubeMapTexture USE="texture"/>
                                </field>
                                <field accessType="inputOutput"
                                    name="chromaticDispertion"
                                    type="SFVec3f" value="0.98 1 1.033"/>
                                <field accessType="inputOutput"
                                    name="bias" type="SFFloat" value="0.5"/>
                                <field accessType="inputOutput"
                                    name="scale" type="SFFloat" value="0.5"/>
                                <field accessType="inputOutput"
                                    name="power" type="SFFloat" value="2"/>
                            </ComposedShader>
                        </Appearance>
                        <Sphere containerField="geometry"/>
                    </Shape>
                </Transform>
                <Script DEF="Bounce">
                    <field accessType="inputOutput" name="translation" type="SFVec3f"/>
                    <field accessType="inputOutput" name="velocity" type="SFVec3f"/>
                    <field accessType="inputOnly" name="set_fraction" type="SFTime"/>
                </Script>
                <TimeSensor DEF="TourTime" cycleInterval="0.15" loop="true"/>
                <ROUTE fromField="cycleTime" fromNode="TourTime"
                    toField="set_fraction" toNode="Bounce"/>
                <ROUTE fromField="translation" fromNode="Bounce"
                    toField="translation" toNode="transform"/>
            </ProtoBody>
        </ProtoDeclare>
        <NavigationInfo/>
        <Background
            backUrl="&quot;../resources/images/all_probes/stpeters_cross/stpeters_back.png&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/resources/images/all_probes/stpeters_cross/stpeters_back.png&quot;"
            bottomUrl="&quot;../resources/images/all_probes/stpeters_cross/stpeters_bottom.png&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/resources/images/all_probes/stpeters_cross/stpeters_bottom.png&quot;"
            frontUrl="&quot;../resources/images/all_probes/stpeters_cross/stpeters_front.png&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/resources/images/all_probes/stpeters_cross/stpeters_front.png&quot;"
            leftUrl="&quot;../resources/images/all_probes/stpeters_cross/stpeters_left.png&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/resources/images/all_probes/stpeters_cross/stpeters_left.png&quot;"
            rightUrl="&quot;../resources/images/all_probes/stpeters_cross/stpeters_right.png&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/resources/images/all_probes/stpeters_cross/stpeters_right.png&quot;" topUrl="&quot;../resources/images/all_probes/stpeters_cross/stpeters_top.png&quot; &quot;https://coderextreme.net/X3DJSONLD/src/main/resources/images/all_probes/stpeters_cross/stpeters_top.png&quot;"/>
        <Viewpoint description="Look at the bubbles flying" position="0 0 20"/>
        <ProtoInstance name="Bubble"/>
        <ProtoInstance name="Bubble"/>
        <ProtoInstance name="Bubble"/>
    </Scene>
</X3D>
